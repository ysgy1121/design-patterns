# μ»΄ν¬μ§€νΈ ν¨ν„΄ (Composite Pattern)

μ»΄ν¬μ§€νΈ ν¨ν„΄μ΄λ€ κ°μ²΄λ“¤μ **λ¶€λ¶„-μ „μ²΄(Part-Whole) κ³„μΈµ**μ„ ν‘ν„ν•κΈ° μ„ν•΄ κ°μ²΄λ“¤μ„ νΈλ¦¬ κµ¬μ΅°λ΅ λ¬¶λ” ν¨ν„΄μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ **κ°λ³„ κ°μ²΄(Leaf)**μ™€ **λ³µν•© κ°μ²΄(Composite)**λ¥Ό λ™μΌν•κ² λ‹¤λ£° μ μλ„λ΅ ν•©λ‹λ‹¤.

## π’΅ ν•µμ‹¬ μ›μΉ™ λ° νΉμ§•

**κ· μΌμ„±(Uniformity):** κ°λ³„ κ°μ²΄μ™€ λ³µν•© κ°μ²΄λ¥Ό κµ¬λ¶„ μ—†μ΄ μ²λ¦¬ν•  μ μκ² ν•©λ‹λ‹¤.
**μ¬κ·€μ  κµ¬μ΅°:** λ³µν•© κ°μ²΄λ” λ‹¤μ‹ λ³µν•© κ°μ²΄λ‚ κ°λ³„ κ°μ²΄λ¥Ό ν¬ν•¨ν•  μ μμ–΄ κ³„μΈµμ μΈ νΈλ¦¬ κµ¬μ΅°λ¥Ό ν‘ν„ν•©λ‹λ‹¤.
**λ‹¨μν™”:** ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ λ³µν•© κ°μ²΄μ κµ¬μ΅°λ¥Ό λ°λΌλ„ λ¨λ“  κ°μ²΄μ— λ€ν•΄ λ™μΌν• μ‘μ—…μ„ μν–‰ν•  μ μλ„λ΅ λ‹¨μν™”ν•©λ‹λ‹¤.

## β•οΈ κµ¬μ„± μ”μ†

| κµ¬μ„± μ”μ† | μ—­ν•  |
| :--- | :--- |
| **μ»΄ν¬λ„νΈ (Component)** | κ°λ³„ κ°μ²΄μ™€ λ³µν•© κ°μ²΄ λ¨λ‘κ°€ κµ¬ν„ν•΄μ•Ό ν•  **κ³µν†µ μΈν„°νμ΄μ¤**λ¥Ό μ •μν•©λ‹λ‹¤. (μ: `Operation()` λ©”μ„λ“) |
| **κ°λ³„ κ°μ²΄ (Leaf)** | νΈλ¦¬ κµ¬μ΅°μ—μ„ λ” μ΄μƒ ν•μ„ μ”μ†λ¥Ό κ°€μ§ μ μ—†λ” **κ°λ³„μ **μΈ κ°μ²΄μ…λ‹λ‹¤. μ»΄ν¬λ„νΈμ κΈ°λ³Έ κΈ°λ¥μ„ κµ¬ν„ν•©λ‹λ‹¤. |
| **λ³µν•© κ°μ²΄ (Composite)** | ν•μ„ μ»΄ν¬λ„νΈ(Leaf λλ” λ‹¤λ¥Έ Composite)λ¥Ό **ν¬ν•¨**ν•λ” κ°μ²΄μ…λ‹λ‹¤. μ»΄ν¬λ„νΈμ κΈ°λ¥μ„ κµ¬ν„ν•λ©°, ν•μ„ μ”μ† κ΄€λ¦¬λ¥Ό μ„ν• λ©”μ„λ“(μ: `add()`, `remove()`)λ¥Ό μ¶”κ°€λ΅ μ •μν•©λ‹λ‹¤. |

## π“ μ¥μ  λ° λ””μμΈ μ›μΉ™

**ν΄λΌμ΄μ–ΈνΈ λ‹¨μμ„±:** ν΄λΌμ΄μ–ΈνΈκ°€ κ°λ³„ κ°μ²΄μ™€ λ³µν•© κ°μ²΄μ μ°¨μ΄λ¥Ό κµ¬λ¶„ν•  ν•„μ” μ—†μ΄ λ™μΌν• μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ‘μ—…ν•  μ μμ–΄ μ½”λ“κ°€ λ‹¨μν•΄μ§‘λ‹λ‹¤.
**μƒλ΅μ΄ νƒ€μ…μ μ¶”κ°€ μ©μ΄μ„±:** μƒλ΅μ΄ κ°λ³„ κ°μ²΄λ‚ λ³µν•© κ°μ²΄λ¥Ό μ¶”κ°€ν•λ”λΌλ„ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•  ν•„μ”κ°€ κ±°μ μ—†μµλ‹λ‹¤.
**κ³„μΈµ κµ¬μ΅° ν‘ν„:** λ””λ ‰ν† λ¦¬-νμΌ κµ¬μ΅°, μ΅°μ§λ„ λ“± μμ—°μ¤λ¬μ΄ νΈλ¦¬ κ³„μΈµ κµ¬μ΅°λ¥Ό ν¨κ³Όμ μΌλ΅ λ¨λΈλ§ν•©λ‹λ‹¤.

## π’» μμ  μ½”λ“: νμΌ μ‹μ¤ν… κµ¬μ΅°

`OrganizationComponent` μΈν„°νμ΄μ¤κ°€ κΈ°λ³Έ κΈ°λ¥μ„ μ •μν•κ³ , `Employee`κ°€ κ°λ³„ κ°μ²΄(Leaf)λ¥Ό, `Department, Company`κ°€ λ³µν•© κ°μ²΄(Composite)λ¥Ό λ‹΄λ‹Ήν•©λ‹λ‹¤. `Company`λ” `Employee`μ΄λ‚ λ‹¤λ¥Έ `Department`λ¥Ό ν¬ν•¨ν•  μ μμµλ‹λ‹¤.

```dart
var company = Company('AκΈ°μ—…');
company.add(Employee('κΉ€μ‚¬μ¥', 'CEO'));

var hr = Department('μΈμ‚¬');
hr.add(Employee('μ΄μΈμ‚¬', 'μΈμ‚¬ λ§¤λ‹μ €'));
hr.add(Employee('κΉ€μΈμ‚¬', 'μΈμ‚¬ μ¤νμ…λ¦¬μ¤νΈ'));
company.add(hr);
```

-----

## π¤” μ‹¬ν™” μ§λ¬Έ 01: μ»΄ν¬μ§€νΈ ν¨ν„΄κ³Ό λ°μ½”λ μ΄ν„° ν¨ν„΄μ λΉ„κµ

| νΉμ§• | μ»΄ν¬μ§€νΈ ν¨ν„΄ (Composite) | λ°μ½”λ μ΄ν„° ν¨ν„΄ (Decorator) |
| :--- | :--- | :--- |
| **λ©μ ** | **κ³„μΈµ κµ¬μ΅°** ν‘ν„ λ° κ°λ³„/λ³µν•© κ°μ²΄ **κ· μΌ μ²λ¦¬** | **κΈ°λ¥ λ™μ  ν™•μ¥** λ° μ±…μ„ μ¶”κ°€ |
| **ν•µμ‹¬ κ΄€κ³„** | **λ¶€λ¶„-μ „μ²΄(Part-Whole)** κ³„μΈµ. λ³µν•© κ°μ²΄λ” ν•μ„ κ°μ²΄λ“¤μ μ»¬λ ‰μ…(Collection)μ„ κ°€μ§. | **λν•‘(Wrapping)** κ΄€κ³„. λ°μ½”λ μ΄ν„°λ” **ν•λ‚μ** ν•µμ‹¬ κ°μ²΄μ— λ€ν• μ°Έμ΅°λ¥Ό κ°€μ§. |
| **λ©”μ„λ“** | ν•μ„ μ”μ† κ΄€λ¦¬λ¥Ό μ„ν• λ©”μ„λ“(`add`, `remove`)λ¥Ό κ°€μ§. | ν•μ„ μ”μ† κ΄€λ¦¬ λ©”μ„λ“κ°€ μ—†μΌλ©°, ν•µμ‹¬ κ°μ²΄μ κΈ°λ¥μ— λ¶€κ°€ κΈ°λ¥μ„ μ¶”κ°€ν•λ” λ° μ§‘μ¤‘. |

## π¤” μ‹¬ν™” μ§λ¬Έ 02: μ»΄ν¬μ§€νΈ ν¨ν„΄μ λ‹¨μ  λ° μ μ•½ μ‚¬ν•­

  * **μ»΄ν¬λ„νΈ μΈν„°νμ΄μ¤ λΉ„λ€ν™”:** κ°λ³„ κ°μ²΄(Leaf)μ—κ²λ” ν•„μ” μ—†λ” `add()`λ‚ `remove()` κ°™μ€ λ³µν•© κ°μ²΄ κ΄€λ¦¬ λ©”μ„λ“κΉμ§€λ„ `Component` μΈν„°νμ΄μ¤μ— ν¬ν•¨ν•΄μ•Ό ν•λ―€λ΅, μΈν„°νμ΄μ¤κ°€ λΉ„λ€ν•΄μ§ μ μμµλ‹λ‹¤ (μ•μ „μ„± vs. ν¬λ…μ„± νΈλ μ΄λ“μ¤ν”„).
  * **λ°νƒ€μ„ νƒ€μ… ν™•μΈ:** νΉμ • μ‘μ—…μ΄ κ°λ³„ κ°μ²΄μ—μ„λ§ μ ν¨ν•  κ²½μ°, ν΄λΌμ΄μ–ΈνΈκ°€ λ°νƒ€μ„μ— νƒ€μ…μ„ ν™•μΈ(`instanceof` λλ” `is`)ν•΄μ•Ό ν•λ” μƒν™©μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.
  * **λ³µμ΅ν• κµ¬μ΅°:** κ°μ²΄ κµ¬μ΅°κ°€ λ„λ¬΄ κΉμ–΄μ§€κ±°λ‚ λ³µμ΅ν•΄μ§€λ©΄ λ””λ²„κΉ… λ° κ΄€λ¦¬κ°€ μ–΄λ ¤μ›μ§ μ μμµλ‹λ‹¤.